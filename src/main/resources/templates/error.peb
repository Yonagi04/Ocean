<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <title data-i18n="title">错误</title>
  <style>
    body { font-family: "Segoe UI", "Helvetica Neue", sans-serif; background-color: #f6f7fb;
           display: flex; justify-content: center; align-items: center; height: 100vh; margin: 0; }
    .container { background: #fff; padding: 40px; border-radius: 12px;
                 box-shadow: 0 4px 12px rgba(0,0,0,0.1); width: 650px; text-align: center;
                 animation: fadeIn 0.4s ease-in-out; }
    h1 { color: #e74c3c; font-size: 28px; margin-bottom: 15px; }
    p.message { color: #555; font-size: 15px; margin-bottom: 10px; }
    table { width: 100%; border-collapse: collapse; margin-bottom: 25px; }
    th, td { border-bottom: 1px solid #eee; padding: 10px 12px; text-align: left;
             font-size: 14px; color: #333; }
    th { background-color: #fafafa; width: 160px; color: #555; }
    tr:last-child td { border-bottom: none; }
    .footer { color: #888; font-size: 13px; margin-top: 15px; }
    .lang-selector-container { position: absolute; top: 20px; right: 20px; z-index: 10;}
    select.lang { padding: 6px 10px; border-radius: 6px; border: 1px solid #ccc; font-size: 1em; }
    @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
  </style>
</head>

<body>
  <div class="lang-selector-container">
    <select id="langSelect" class="lang">
      <option value="zh">简体中文</option>
      <option value="en">English</option>
      <option value="ja">日本語</option>
    </select>
  </div>

  <div class="container">
    <h1 data-i18n="title">发生了一个错误</h1>
    <p class="message" data-i18n="msg1">请求处理过程中出现问题，请稍后再试。</p>
    <p class="message" data-i18n="msg2">如果您是用户 / QA，请将问题反馈给服务负责人。</p>
    <p class="message" data-i18n="msg3">如果您是服务负责人，请查看服务器日志以排查问题。</p>

    <table>
      <tr><th data-i18n="traceId">Trace ID</th><td>{{ traceId }}</td></tr>
      <tr><th data-i18n="status">状态码</th><td>{{ status }}</td></tr>
      <tr><th data-i18n="path">请求路径</th><td>{{ uri }}</td></tr>
      <tr><th data-i18n="method">请求方法</th><td>{{ method }}</td></tr>
      <tr><th data-i18n="clientIp">客户端 IP</th><td>{{ clientIp }}</td></tr>
      <tr><th>User-Agent</th><td>{{ userAgent }}</td></tr>
      <tr><th data-i18n="time">时间</th><td>{{ timestamp }}</td></tr>
    </table>

    <div class="footer">Ocean © 2025</div>
  </div>

  <script>
    const translations = {
      zh: {
        title: "发生了一个错误",
        msg1: "请求处理过程中出现问题，请稍后再试。",
        msg2: "如果您是用户 / QA，请将问题反馈给服务负责人。",
        msg3: "如果您是服务负责人，请查看服务器日志以排查问题。",
        traceId: "Trace ID",
        status: "状态码",
        path: "请求路径",
        method: "请求方法",
        clientIp: "客户端 IP",
        time: "时间"
      },
      en: {
        title: "An error occurred",
        msg1: "There was a problem processing your request. Please try again later.",
        msg2: "If you are a user or QA, please report the issue to the service owner.",
        msg3: "If you are the service owner, please check the server logs for details.",
        traceId: "Trace ID",
        status: "Status",
        path: "Request Path",
        method: "Request Method",
        clientIp: "Client IP",
        time: "Time"
      },
      ja: {
        title: "エラーが発生しました",
        msg1: "リクエストの処理中にエラーが発生しました。しばらくしてからもう一度お試しください。",
        msg2: "ユーザーまたはQAの方は、サービス担当者に問題を報告してください。",
        msg3: "サービス担当者の方は、サーバーログを確認して原因を調査してください。",
        traceId: "Trace ID",
        status: "ステータスコード",
        path: "パス",
        method: "リクエストメソッド",
        clientIp: "クライアントIP",
        time: "時間"
      }
    };

    const langSelect = document.getElementById("langSelect");
    const updateLang = lang => {
      document.querySelectorAll("[data-i18n]").forEach(el => {
        const key = el.getAttribute("data-i18n");
        el.innerText = translations[lang][key];
      });
    };

    langSelect.addEventListener("change", e => {
      updateLang(e.target.value);
      localStorage.setItem("lang", e.target.value);
    });

    const savedLang = localStorage.getItem("lang") || "zh";
    langSelect.value = savedLang;
    updateLang(savedLang);
  </script>
</body>
</html>
